# ch2.2 Web and HTTP

### HTTP

- 웹의 응용 계층 프로토콜
- 클라이언트 / 서버 모델
- TCP를 사용
    - 클라이언트가 TCP 연결 initiate
    - 서버가 TCP 연결 accept
    - HTTP 메시지 교환
    - TCP 연결 close
- HTTP는 **stateless**
    - 서버는 클라이언트의 지난 request에 대한 정보를 유지하지 않음

### HTTP connections

- non-persistent HTTP
    - 한개의 TCP 연결로 한개의 object만 전송 가능
        - 전송 후 연결 close
    - multiple object는 multiple connection 필요
- persistent HTTP
    - 한개의 TCP 연결로 multiple object가 전송 가능
    
- congestion control을 통해 TCP의 throughput은 변화할 수 있다.(지수함수)
    
    → non-persistent는 비효율적인 초기 구간 성능만 반복
    
    → persistent는 효율적인 구간까지 지속
    

### Response time

non-persistent HTTP : 2RTT, 각 TCP 연결을 위한 OS overhead 발생, 병렬 연결 가능

persistent HTTP : 1RTT, TCP는 쓸수록 빨라짐

### HTTP request message

request line + header lines + body

### HTTP response message

status line + header lines + body

### Cookies

HTTP protocol은 stateless이기 때문에 request를 보낸 유저의 기록을 기억하지 않는다.

이를 기억하기 위해 사용

- 4개의 구성요소
    - cookie header line in HTTP response message
    - cookie header line in next HTTP request message
    - cookie file은 유저의 host에 유지되고 browser에 의해 관리됨
    - 웹사이트의 데이터베이스

### Web cashes(proxy server)

origin 서버의 부담을 덜기 위해 proxy 서버로 중계

캐시의 위치

- web browser
- 별도 proxy server

### Conditional GET

캐시 서버가 origin 서버에 리소스의 수정이 있는지 확인
