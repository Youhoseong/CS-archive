# 호성 공간

# 패킷스위칭
- 패킷: 데이터 전송 단위
- Host는 응용 계층의 메시지를 패킷 단위로 쪼개어 전송함.
- 패킷은 transmission rate(전송 속도, 링크 대역폭, 링크 용량)에 따라 네트워크로 전송됨.

- packet transmission delay(패킷 전송 지연시간)은 L(패킷길이, 비트 수)/ R(링크 용량)로 계산함.

- store and forward: 전송되고 있는 1개의 패킷이 목적지에 도착해야 그 다음 패킷도 전송될 수 있음
- 하나의 라우터를 거친다고 가정: end-to-end delay는 2 * L / R임.



- queuing delay and loss: 라우터에 연결된 링크 용량이 전부 꽉찼을때, 전송 대기 중인 패킷은 라우터의 메모리(버퍼)에서 기다리게 되는떼 이 때, 기다리는 시간을 queuing delay라고 하며 memory 또한 꽉찬다면 이후 들어오는 패킷은 drop됨. 이를 packet loss라고 함

- 링크로 보내져야 하는 패킷보다 링크가 비워지는 패킷 비율이 적다면, 이는 불안정한 시스템이라 할 수 있음.


# 네트워크의 핵심 두 가지 기능
- routing
    -  시작점부터 도착점까지의 경로를 결정함

- forwarding
    - 라우터의 특정 input으로 들어온 패킷을 도착점에 따라 어떤 output으로 내보낼지 결정함


# 서킷 스위칭
- 시작점부터 도착점까지의 경로를 미리 확보해둠. (예약)
- 링크 대역폭을 나눠야 하기 때문에, 한 번에 사용할 수 있는 사용자의 수가 한정될 수 밖에 없음.
- dedicated resource, no sharing
- 별도의 준비 시간이 필요함
- 전통적인 전화 네트워크 구성에 사용됐음.


# 패킷 스위칭과 서킷 스위칭
- 결론: 패킷 스위칭이 더 많은 사용자가 네트워크를 사용하는 것을 보장함
- 패킷 스위칭이 모든 면에서 우월할까?
    - 패킷 스위칭은 서킷 스위칭에 비해 bursty한 통신에 적합한 것임. 절대적이진 않다.
    - resource sharing
    - simpler, no call setup


# 세상의 모든 인터넷을 연결
- O(n^2)임. 매우 비용이 큰 작업
- 따라서 중간에서 연결해주는 역할을 하는 존재들이 있음( Global ISP - KT, SKT, LGT..)
- 개인 사용자는 인터넷에 연결되는 것을 제공받고(개인의 이득) 돈을 지불함(ISP의 이득) => 따라서 상호 이득 구조를 지향하는 것임
- 하지만, content provider (GOOGLE, NAVER..) 의 컨텐츠가 ISP에게는 이득, content provider는 인터넷에 연결되는 이득을 취하므로, 돈을 지불하지 않음


# Delay (latency)

- 패킷 스위칭을 다루므로, 여러 종류의 Delay가 발생할 수 있음 => 분석해보자.

1. queue 용량이 제한됨에 따른 딜레이 (queueing delay) 
2. 패킷이 실제로 링크의 시작점에서 끝점까지 가는 딜레이 (propagation delay)
3. 큐에서 링크로 보내지는 시간 (transmission delay)
4. 라우터에서 패킷을 처리하는 시간 (processing delay)

등을 고려가능 함.


1.  매우 클 수 있다. (유저 수에 따라 결과가 천차만별)
2.  전, 자기 신호의 전파 속도 => 매우 작다.
3.  L/R이므로 상수 값임. => 전체 딜레이에 작은 영향
4.  CPU는 빠르다 => 작다.

적은 용량의 패킷 전송은 propagation delay의 영향을 많이 받는다. 
큰 용량의 패킷 전송은 bandwidth, 대역폭에 영향을 많이 받는다.
종종 큐잉 딜레이가 전체 딜레이의 가장 큰 영향을 끼친다. => 중심적으로 학습 대상.


# ping과 traceroute
- ping: 목적지까지 갔다가 옴 (목적지까지의 소요 시간 측정)
- traceroute: 매 router를 만날 때마다 다시 옴. (매 라우터까지의 소요 시간 측정)

